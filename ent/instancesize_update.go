// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"kv-shepherd.io/shepherd/ent/instancesize"
	"kv-shepherd.io/shepherd/ent/predicate"
)

// InstanceSizeUpdate is the builder for updating InstanceSize entities.
type InstanceSizeUpdate struct {
	config
	hooks    []Hook
	mutation *InstanceSizeMutation
}

// Where appends a list predicates to the InstanceSizeUpdate builder.
func (_u *InstanceSizeUpdate) Where(ps ...predicate.InstanceSize) *InstanceSizeUpdate {
	_u.mutation.Where(ps...)
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *InstanceSizeUpdate) SetUpdatedAt(v time.Time) *InstanceSizeUpdate {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetName sets the "name" field.
func (_u *InstanceSizeUpdate) SetName(v string) *InstanceSizeUpdate {
	_u.mutation.SetName(v)
	return _u
}

// SetNillableName sets the "name" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableName(v *string) *InstanceSizeUpdate {
	if v != nil {
		_u.SetName(*v)
	}
	return _u
}

// SetDisplayName sets the "display_name" field.
func (_u *InstanceSizeUpdate) SetDisplayName(v string) *InstanceSizeUpdate {
	_u.mutation.SetDisplayName(v)
	return _u
}

// SetNillableDisplayName sets the "display_name" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableDisplayName(v *string) *InstanceSizeUpdate {
	if v != nil {
		_u.SetDisplayName(*v)
	}
	return _u
}

// ClearDisplayName clears the value of the "display_name" field.
func (_u *InstanceSizeUpdate) ClearDisplayName() *InstanceSizeUpdate {
	_u.mutation.ClearDisplayName()
	return _u
}

// SetDescription sets the "description" field.
func (_u *InstanceSizeUpdate) SetDescription(v string) *InstanceSizeUpdate {
	_u.mutation.SetDescription(v)
	return _u
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableDescription(v *string) *InstanceSizeUpdate {
	if v != nil {
		_u.SetDescription(*v)
	}
	return _u
}

// ClearDescription clears the value of the "description" field.
func (_u *InstanceSizeUpdate) ClearDescription() *InstanceSizeUpdate {
	_u.mutation.ClearDescription()
	return _u
}

// SetCPUCores sets the "cpu_cores" field.
func (_u *InstanceSizeUpdate) SetCPUCores(v int) *InstanceSizeUpdate {
	_u.mutation.ResetCPUCores()
	_u.mutation.SetCPUCores(v)
	return _u
}

// SetNillableCPUCores sets the "cpu_cores" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableCPUCores(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetCPUCores(*v)
	}
	return _u
}

// AddCPUCores adds value to the "cpu_cores" field.
func (_u *InstanceSizeUpdate) AddCPUCores(v int) *InstanceSizeUpdate {
	_u.mutation.AddCPUCores(v)
	return _u
}

// SetMemoryMB sets the "memory_mb" field.
func (_u *InstanceSizeUpdate) SetMemoryMB(v int) *InstanceSizeUpdate {
	_u.mutation.ResetMemoryMB()
	_u.mutation.SetMemoryMB(v)
	return _u
}

// SetNillableMemoryMB sets the "memory_mb" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableMemoryMB(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetMemoryMB(*v)
	}
	return _u
}

// AddMemoryMB adds value to the "memory_mb" field.
func (_u *InstanceSizeUpdate) AddMemoryMB(v int) *InstanceSizeUpdate {
	_u.mutation.AddMemoryMB(v)
	return _u
}

// SetDiskGB sets the "disk_gb" field.
func (_u *InstanceSizeUpdate) SetDiskGB(v int) *InstanceSizeUpdate {
	_u.mutation.ResetDiskGB()
	_u.mutation.SetDiskGB(v)
	return _u
}

// SetNillableDiskGB sets the "disk_gb" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableDiskGB(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetDiskGB(*v)
	}
	return _u
}

// AddDiskGB adds value to the "disk_gb" field.
func (_u *InstanceSizeUpdate) AddDiskGB(v int) *InstanceSizeUpdate {
	_u.mutation.AddDiskGB(v)
	return _u
}

// ClearDiskGB clears the value of the "disk_gb" field.
func (_u *InstanceSizeUpdate) ClearDiskGB() *InstanceSizeUpdate {
	_u.mutation.ClearDiskGB()
	return _u
}

// SetCPURequest sets the "cpu_request" field.
func (_u *InstanceSizeUpdate) SetCPURequest(v int) *InstanceSizeUpdate {
	_u.mutation.ResetCPURequest()
	_u.mutation.SetCPURequest(v)
	return _u
}

// SetNillableCPURequest sets the "cpu_request" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableCPURequest(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetCPURequest(*v)
	}
	return _u
}

// AddCPURequest adds value to the "cpu_request" field.
func (_u *InstanceSizeUpdate) AddCPURequest(v int) *InstanceSizeUpdate {
	_u.mutation.AddCPURequest(v)
	return _u
}

// ClearCPURequest clears the value of the "cpu_request" field.
func (_u *InstanceSizeUpdate) ClearCPURequest() *InstanceSizeUpdate {
	_u.mutation.ClearCPURequest()
	return _u
}

// SetMemoryRequestMB sets the "memory_request_mb" field.
func (_u *InstanceSizeUpdate) SetMemoryRequestMB(v int) *InstanceSizeUpdate {
	_u.mutation.ResetMemoryRequestMB()
	_u.mutation.SetMemoryRequestMB(v)
	return _u
}

// SetNillableMemoryRequestMB sets the "memory_request_mb" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableMemoryRequestMB(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetMemoryRequestMB(*v)
	}
	return _u
}

// AddMemoryRequestMB adds value to the "memory_request_mb" field.
func (_u *InstanceSizeUpdate) AddMemoryRequestMB(v int) *InstanceSizeUpdate {
	_u.mutation.AddMemoryRequestMB(v)
	return _u
}

// ClearMemoryRequestMB clears the value of the "memory_request_mb" field.
func (_u *InstanceSizeUpdate) ClearMemoryRequestMB() *InstanceSizeUpdate {
	_u.mutation.ClearMemoryRequestMB()
	return _u
}

// SetDedicatedCPU sets the "dedicated_cpu" field.
func (_u *InstanceSizeUpdate) SetDedicatedCPU(v bool) *InstanceSizeUpdate {
	_u.mutation.SetDedicatedCPU(v)
	return _u
}

// SetNillableDedicatedCPU sets the "dedicated_cpu" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableDedicatedCPU(v *bool) *InstanceSizeUpdate {
	if v != nil {
		_u.SetDedicatedCPU(*v)
	}
	return _u
}

// SetRequiresGpu sets the "requires_gpu" field.
func (_u *InstanceSizeUpdate) SetRequiresGpu(v bool) *InstanceSizeUpdate {
	_u.mutation.SetRequiresGpu(v)
	return _u
}

// SetNillableRequiresGpu sets the "requires_gpu" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableRequiresGpu(v *bool) *InstanceSizeUpdate {
	if v != nil {
		_u.SetRequiresGpu(*v)
	}
	return _u
}

// SetRequiresSriov sets the "requires_sriov" field.
func (_u *InstanceSizeUpdate) SetRequiresSriov(v bool) *InstanceSizeUpdate {
	_u.mutation.SetRequiresSriov(v)
	return _u
}

// SetNillableRequiresSriov sets the "requires_sriov" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableRequiresSriov(v *bool) *InstanceSizeUpdate {
	if v != nil {
		_u.SetRequiresSriov(*v)
	}
	return _u
}

// SetRequiresHugepages sets the "requires_hugepages" field.
func (_u *InstanceSizeUpdate) SetRequiresHugepages(v bool) *InstanceSizeUpdate {
	_u.mutation.SetRequiresHugepages(v)
	return _u
}

// SetNillableRequiresHugepages sets the "requires_hugepages" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableRequiresHugepages(v *bool) *InstanceSizeUpdate {
	if v != nil {
		_u.SetRequiresHugepages(*v)
	}
	return _u
}

// SetHugepagesSize sets the "hugepages_size" field.
func (_u *InstanceSizeUpdate) SetHugepagesSize(v string) *InstanceSizeUpdate {
	_u.mutation.SetHugepagesSize(v)
	return _u
}

// SetNillableHugepagesSize sets the "hugepages_size" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableHugepagesSize(v *string) *InstanceSizeUpdate {
	if v != nil {
		_u.SetHugepagesSize(*v)
	}
	return _u
}

// ClearHugepagesSize clears the value of the "hugepages_size" field.
func (_u *InstanceSizeUpdate) ClearHugepagesSize() *InstanceSizeUpdate {
	_u.mutation.ClearHugepagesSize()
	return _u
}

// SetSpecOverrides sets the "spec_overrides" field.
func (_u *InstanceSizeUpdate) SetSpecOverrides(v map[string]interface{}) *InstanceSizeUpdate {
	_u.mutation.SetSpecOverrides(v)
	return _u
}

// ClearSpecOverrides clears the value of the "spec_overrides" field.
func (_u *InstanceSizeUpdate) ClearSpecOverrides() *InstanceSizeUpdate {
	_u.mutation.ClearSpecOverrides()
	return _u
}

// SetSortOrder sets the "sort_order" field.
func (_u *InstanceSizeUpdate) SetSortOrder(v int) *InstanceSizeUpdate {
	_u.mutation.ResetSortOrder()
	_u.mutation.SetSortOrder(v)
	return _u
}

// SetNillableSortOrder sets the "sort_order" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableSortOrder(v *int) *InstanceSizeUpdate {
	if v != nil {
		_u.SetSortOrder(*v)
	}
	return _u
}

// AddSortOrder adds value to the "sort_order" field.
func (_u *InstanceSizeUpdate) AddSortOrder(v int) *InstanceSizeUpdate {
	_u.mutation.AddSortOrder(v)
	return _u
}

// SetEnabled sets the "enabled" field.
func (_u *InstanceSizeUpdate) SetEnabled(v bool) *InstanceSizeUpdate {
	_u.mutation.SetEnabled(v)
	return _u
}

// SetNillableEnabled sets the "enabled" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableEnabled(v *bool) *InstanceSizeUpdate {
	if v != nil {
		_u.SetEnabled(*v)
	}
	return _u
}

// SetCreatedBy sets the "created_by" field.
func (_u *InstanceSizeUpdate) SetCreatedBy(v string) *InstanceSizeUpdate {
	_u.mutation.SetCreatedBy(v)
	return _u
}

// SetNillableCreatedBy sets the "created_by" field if the given value is not nil.
func (_u *InstanceSizeUpdate) SetNillableCreatedBy(v *string) *InstanceSizeUpdate {
	if v != nil {
		_u.SetCreatedBy(*v)
	}
	return _u
}

// Mutation returns the InstanceSizeMutation object of the builder.
func (_u *InstanceSizeUpdate) Mutation() *InstanceSizeMutation {
	return _u.mutation
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (_u *InstanceSizeUpdate) Save(ctx context.Context) (int, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *InstanceSizeUpdate) SaveX(ctx context.Context) int {
	affected, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (_u *InstanceSizeUpdate) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *InstanceSizeUpdate) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *InstanceSizeUpdate) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := instancesize.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *InstanceSizeUpdate) check() error {
	if v, ok := _u.mutation.Name(); ok {
		if err := instancesize.NameValidator(v); err != nil {
			return &ValidationError{Name: "name", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CPUCores(); ok {
		if err := instancesize.CPUCoresValidator(v); err != nil {
			return &ValidationError{Name: "cpu_cores", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.cpu_cores": %w`, err)}
		}
	}
	if v, ok := _u.mutation.MemoryMB(); ok {
		if err := instancesize.MemoryMBValidator(v); err != nil {
			return &ValidationError{Name: "memory_mb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.memory_mb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.DiskGB(); ok {
		if err := instancesize.DiskGBValidator(v); err != nil {
			return &ValidationError{Name: "disk_gb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.disk_gb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CPURequest(); ok {
		if err := instancesize.CPURequestValidator(v); err != nil {
			return &ValidationError{Name: "cpu_request", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.cpu_request": %w`, err)}
		}
	}
	if v, ok := _u.mutation.MemoryRequestMB(); ok {
		if err := instancesize.MemoryRequestMBValidator(v); err != nil {
			return &ValidationError{Name: "memory_request_mb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.memory_request_mb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CreatedBy(); ok {
		if err := instancesize.CreatedByValidator(v); err != nil {
			return &ValidationError{Name: "created_by", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.created_by": %w`, err)}
		}
	}
	return nil
}

func (_u *InstanceSizeUpdate) sqlSave(ctx context.Context) (_node int, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(instancesize.Table, instancesize.Columns, sqlgraph.NewFieldSpec(instancesize.FieldID, field.TypeString))
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(instancesize.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.Name(); ok {
		_spec.SetField(instancesize.FieldName, field.TypeString, value)
	}
	if value, ok := _u.mutation.DisplayName(); ok {
		_spec.SetField(instancesize.FieldDisplayName, field.TypeString, value)
	}
	if _u.mutation.DisplayNameCleared() {
		_spec.ClearField(instancesize.FieldDisplayName, field.TypeString)
	}
	if value, ok := _u.mutation.Description(); ok {
		_spec.SetField(instancesize.FieldDescription, field.TypeString, value)
	}
	if _u.mutation.DescriptionCleared() {
		_spec.ClearField(instancesize.FieldDescription, field.TypeString)
	}
	if value, ok := _u.mutation.CPUCores(); ok {
		_spec.SetField(instancesize.FieldCPUCores, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCPUCores(); ok {
		_spec.AddField(instancesize.FieldCPUCores, field.TypeInt, value)
	}
	if value, ok := _u.mutation.MemoryMB(); ok {
		_spec.SetField(instancesize.FieldMemoryMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedMemoryMB(); ok {
		_spec.AddField(instancesize.FieldMemoryMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.DiskGB(); ok {
		_spec.SetField(instancesize.FieldDiskGB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDiskGB(); ok {
		_spec.AddField(instancesize.FieldDiskGB, field.TypeInt, value)
	}
	if _u.mutation.DiskGBCleared() {
		_spec.ClearField(instancesize.FieldDiskGB, field.TypeInt)
	}
	if value, ok := _u.mutation.CPURequest(); ok {
		_spec.SetField(instancesize.FieldCPURequest, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCPURequest(); ok {
		_spec.AddField(instancesize.FieldCPURequest, field.TypeInt, value)
	}
	if _u.mutation.CPURequestCleared() {
		_spec.ClearField(instancesize.FieldCPURequest, field.TypeInt)
	}
	if value, ok := _u.mutation.MemoryRequestMB(); ok {
		_spec.SetField(instancesize.FieldMemoryRequestMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedMemoryRequestMB(); ok {
		_spec.AddField(instancesize.FieldMemoryRequestMB, field.TypeInt, value)
	}
	if _u.mutation.MemoryRequestMBCleared() {
		_spec.ClearField(instancesize.FieldMemoryRequestMB, field.TypeInt)
	}
	if value, ok := _u.mutation.DedicatedCPU(); ok {
		_spec.SetField(instancesize.FieldDedicatedCPU, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresGpu(); ok {
		_spec.SetField(instancesize.FieldRequiresGpu, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresSriov(); ok {
		_spec.SetField(instancesize.FieldRequiresSriov, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresHugepages(); ok {
		_spec.SetField(instancesize.FieldRequiresHugepages, field.TypeBool, value)
	}
	if value, ok := _u.mutation.HugepagesSize(); ok {
		_spec.SetField(instancesize.FieldHugepagesSize, field.TypeString, value)
	}
	if _u.mutation.HugepagesSizeCleared() {
		_spec.ClearField(instancesize.FieldHugepagesSize, field.TypeString)
	}
	if value, ok := _u.mutation.SpecOverrides(); ok {
		_spec.SetField(instancesize.FieldSpecOverrides, field.TypeJSON, value)
	}
	if _u.mutation.SpecOverridesCleared() {
		_spec.ClearField(instancesize.FieldSpecOverrides, field.TypeJSON)
	}
	if value, ok := _u.mutation.SortOrder(); ok {
		_spec.SetField(instancesize.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSortOrder(); ok {
		_spec.AddField(instancesize.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.Enabled(); ok {
		_spec.SetField(instancesize.FieldEnabled, field.TypeBool, value)
	}
	if value, ok := _u.mutation.CreatedBy(); ok {
		_spec.SetField(instancesize.FieldCreatedBy, field.TypeString, value)
	}
	if _node, err = sqlgraph.UpdateNodes(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{instancesize.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	_u.mutation.done = true
	return _node, nil
}

// InstanceSizeUpdateOne is the builder for updating a single InstanceSize entity.
type InstanceSizeUpdateOne struct {
	config
	fields   []string
	hooks    []Hook
	mutation *InstanceSizeMutation
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *InstanceSizeUpdateOne) SetUpdatedAt(v time.Time) *InstanceSizeUpdateOne {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetName sets the "name" field.
func (_u *InstanceSizeUpdateOne) SetName(v string) *InstanceSizeUpdateOne {
	_u.mutation.SetName(v)
	return _u
}

// SetNillableName sets the "name" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableName(v *string) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetName(*v)
	}
	return _u
}

// SetDisplayName sets the "display_name" field.
func (_u *InstanceSizeUpdateOne) SetDisplayName(v string) *InstanceSizeUpdateOne {
	_u.mutation.SetDisplayName(v)
	return _u
}

// SetNillableDisplayName sets the "display_name" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableDisplayName(v *string) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetDisplayName(*v)
	}
	return _u
}

// ClearDisplayName clears the value of the "display_name" field.
func (_u *InstanceSizeUpdateOne) ClearDisplayName() *InstanceSizeUpdateOne {
	_u.mutation.ClearDisplayName()
	return _u
}

// SetDescription sets the "description" field.
func (_u *InstanceSizeUpdateOne) SetDescription(v string) *InstanceSizeUpdateOne {
	_u.mutation.SetDescription(v)
	return _u
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableDescription(v *string) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetDescription(*v)
	}
	return _u
}

// ClearDescription clears the value of the "description" field.
func (_u *InstanceSizeUpdateOne) ClearDescription() *InstanceSizeUpdateOne {
	_u.mutation.ClearDescription()
	return _u
}

// SetCPUCores sets the "cpu_cores" field.
func (_u *InstanceSizeUpdateOne) SetCPUCores(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetCPUCores()
	_u.mutation.SetCPUCores(v)
	return _u
}

// SetNillableCPUCores sets the "cpu_cores" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableCPUCores(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetCPUCores(*v)
	}
	return _u
}

// AddCPUCores adds value to the "cpu_cores" field.
func (_u *InstanceSizeUpdateOne) AddCPUCores(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddCPUCores(v)
	return _u
}

// SetMemoryMB sets the "memory_mb" field.
func (_u *InstanceSizeUpdateOne) SetMemoryMB(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetMemoryMB()
	_u.mutation.SetMemoryMB(v)
	return _u
}

// SetNillableMemoryMB sets the "memory_mb" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableMemoryMB(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetMemoryMB(*v)
	}
	return _u
}

// AddMemoryMB adds value to the "memory_mb" field.
func (_u *InstanceSizeUpdateOne) AddMemoryMB(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddMemoryMB(v)
	return _u
}

// SetDiskGB sets the "disk_gb" field.
func (_u *InstanceSizeUpdateOne) SetDiskGB(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetDiskGB()
	_u.mutation.SetDiskGB(v)
	return _u
}

// SetNillableDiskGB sets the "disk_gb" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableDiskGB(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetDiskGB(*v)
	}
	return _u
}

// AddDiskGB adds value to the "disk_gb" field.
func (_u *InstanceSizeUpdateOne) AddDiskGB(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddDiskGB(v)
	return _u
}

// ClearDiskGB clears the value of the "disk_gb" field.
func (_u *InstanceSizeUpdateOne) ClearDiskGB() *InstanceSizeUpdateOne {
	_u.mutation.ClearDiskGB()
	return _u
}

// SetCPURequest sets the "cpu_request" field.
func (_u *InstanceSizeUpdateOne) SetCPURequest(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetCPURequest()
	_u.mutation.SetCPURequest(v)
	return _u
}

// SetNillableCPURequest sets the "cpu_request" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableCPURequest(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetCPURequest(*v)
	}
	return _u
}

// AddCPURequest adds value to the "cpu_request" field.
func (_u *InstanceSizeUpdateOne) AddCPURequest(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddCPURequest(v)
	return _u
}

// ClearCPURequest clears the value of the "cpu_request" field.
func (_u *InstanceSizeUpdateOne) ClearCPURequest() *InstanceSizeUpdateOne {
	_u.mutation.ClearCPURequest()
	return _u
}

// SetMemoryRequestMB sets the "memory_request_mb" field.
func (_u *InstanceSizeUpdateOne) SetMemoryRequestMB(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetMemoryRequestMB()
	_u.mutation.SetMemoryRequestMB(v)
	return _u
}

// SetNillableMemoryRequestMB sets the "memory_request_mb" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableMemoryRequestMB(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetMemoryRequestMB(*v)
	}
	return _u
}

// AddMemoryRequestMB adds value to the "memory_request_mb" field.
func (_u *InstanceSizeUpdateOne) AddMemoryRequestMB(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddMemoryRequestMB(v)
	return _u
}

// ClearMemoryRequestMB clears the value of the "memory_request_mb" field.
func (_u *InstanceSizeUpdateOne) ClearMemoryRequestMB() *InstanceSizeUpdateOne {
	_u.mutation.ClearMemoryRequestMB()
	return _u
}

// SetDedicatedCPU sets the "dedicated_cpu" field.
func (_u *InstanceSizeUpdateOne) SetDedicatedCPU(v bool) *InstanceSizeUpdateOne {
	_u.mutation.SetDedicatedCPU(v)
	return _u
}

// SetNillableDedicatedCPU sets the "dedicated_cpu" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableDedicatedCPU(v *bool) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetDedicatedCPU(*v)
	}
	return _u
}

// SetRequiresGpu sets the "requires_gpu" field.
func (_u *InstanceSizeUpdateOne) SetRequiresGpu(v bool) *InstanceSizeUpdateOne {
	_u.mutation.SetRequiresGpu(v)
	return _u
}

// SetNillableRequiresGpu sets the "requires_gpu" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableRequiresGpu(v *bool) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetRequiresGpu(*v)
	}
	return _u
}

// SetRequiresSriov sets the "requires_sriov" field.
func (_u *InstanceSizeUpdateOne) SetRequiresSriov(v bool) *InstanceSizeUpdateOne {
	_u.mutation.SetRequiresSriov(v)
	return _u
}

// SetNillableRequiresSriov sets the "requires_sriov" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableRequiresSriov(v *bool) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetRequiresSriov(*v)
	}
	return _u
}

// SetRequiresHugepages sets the "requires_hugepages" field.
func (_u *InstanceSizeUpdateOne) SetRequiresHugepages(v bool) *InstanceSizeUpdateOne {
	_u.mutation.SetRequiresHugepages(v)
	return _u
}

// SetNillableRequiresHugepages sets the "requires_hugepages" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableRequiresHugepages(v *bool) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetRequiresHugepages(*v)
	}
	return _u
}

// SetHugepagesSize sets the "hugepages_size" field.
func (_u *InstanceSizeUpdateOne) SetHugepagesSize(v string) *InstanceSizeUpdateOne {
	_u.mutation.SetHugepagesSize(v)
	return _u
}

// SetNillableHugepagesSize sets the "hugepages_size" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableHugepagesSize(v *string) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetHugepagesSize(*v)
	}
	return _u
}

// ClearHugepagesSize clears the value of the "hugepages_size" field.
func (_u *InstanceSizeUpdateOne) ClearHugepagesSize() *InstanceSizeUpdateOne {
	_u.mutation.ClearHugepagesSize()
	return _u
}

// SetSpecOverrides sets the "spec_overrides" field.
func (_u *InstanceSizeUpdateOne) SetSpecOverrides(v map[string]interface{}) *InstanceSizeUpdateOne {
	_u.mutation.SetSpecOverrides(v)
	return _u
}

// ClearSpecOverrides clears the value of the "spec_overrides" field.
func (_u *InstanceSizeUpdateOne) ClearSpecOverrides() *InstanceSizeUpdateOne {
	_u.mutation.ClearSpecOverrides()
	return _u
}

// SetSortOrder sets the "sort_order" field.
func (_u *InstanceSizeUpdateOne) SetSortOrder(v int) *InstanceSizeUpdateOne {
	_u.mutation.ResetSortOrder()
	_u.mutation.SetSortOrder(v)
	return _u
}

// SetNillableSortOrder sets the "sort_order" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableSortOrder(v *int) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetSortOrder(*v)
	}
	return _u
}

// AddSortOrder adds value to the "sort_order" field.
func (_u *InstanceSizeUpdateOne) AddSortOrder(v int) *InstanceSizeUpdateOne {
	_u.mutation.AddSortOrder(v)
	return _u
}

// SetEnabled sets the "enabled" field.
func (_u *InstanceSizeUpdateOne) SetEnabled(v bool) *InstanceSizeUpdateOne {
	_u.mutation.SetEnabled(v)
	return _u
}

// SetNillableEnabled sets the "enabled" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableEnabled(v *bool) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetEnabled(*v)
	}
	return _u
}

// SetCreatedBy sets the "created_by" field.
func (_u *InstanceSizeUpdateOne) SetCreatedBy(v string) *InstanceSizeUpdateOne {
	_u.mutation.SetCreatedBy(v)
	return _u
}

// SetNillableCreatedBy sets the "created_by" field if the given value is not nil.
func (_u *InstanceSizeUpdateOne) SetNillableCreatedBy(v *string) *InstanceSizeUpdateOne {
	if v != nil {
		_u.SetCreatedBy(*v)
	}
	return _u
}

// Mutation returns the InstanceSizeMutation object of the builder.
func (_u *InstanceSizeUpdateOne) Mutation() *InstanceSizeMutation {
	return _u.mutation
}

// Where appends a list predicates to the InstanceSizeUpdate builder.
func (_u *InstanceSizeUpdateOne) Where(ps ...predicate.InstanceSize) *InstanceSizeUpdateOne {
	_u.mutation.Where(ps...)
	return _u
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (_u *InstanceSizeUpdateOne) Select(field string, fields ...string) *InstanceSizeUpdateOne {
	_u.fields = append([]string{field}, fields...)
	return _u
}

// Save executes the query and returns the updated InstanceSize entity.
func (_u *InstanceSizeUpdateOne) Save(ctx context.Context) (*InstanceSize, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *InstanceSizeUpdateOne) SaveX(ctx context.Context) *InstanceSize {
	node, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (_u *InstanceSizeUpdateOne) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *InstanceSizeUpdateOne) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *InstanceSizeUpdateOne) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := instancesize.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *InstanceSizeUpdateOne) check() error {
	if v, ok := _u.mutation.Name(); ok {
		if err := instancesize.NameValidator(v); err != nil {
			return &ValidationError{Name: "name", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CPUCores(); ok {
		if err := instancesize.CPUCoresValidator(v); err != nil {
			return &ValidationError{Name: "cpu_cores", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.cpu_cores": %w`, err)}
		}
	}
	if v, ok := _u.mutation.MemoryMB(); ok {
		if err := instancesize.MemoryMBValidator(v); err != nil {
			return &ValidationError{Name: "memory_mb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.memory_mb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.DiskGB(); ok {
		if err := instancesize.DiskGBValidator(v); err != nil {
			return &ValidationError{Name: "disk_gb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.disk_gb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CPURequest(); ok {
		if err := instancesize.CPURequestValidator(v); err != nil {
			return &ValidationError{Name: "cpu_request", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.cpu_request": %w`, err)}
		}
	}
	if v, ok := _u.mutation.MemoryRequestMB(); ok {
		if err := instancesize.MemoryRequestMBValidator(v); err != nil {
			return &ValidationError{Name: "memory_request_mb", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.memory_request_mb": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CreatedBy(); ok {
		if err := instancesize.CreatedByValidator(v); err != nil {
			return &ValidationError{Name: "created_by", err: fmt.Errorf(`ent: validator failed for field "InstanceSize.created_by": %w`, err)}
		}
	}
	return nil
}

func (_u *InstanceSizeUpdateOne) sqlSave(ctx context.Context) (_node *InstanceSize, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(instancesize.Table, instancesize.Columns, sqlgraph.NewFieldSpec(instancesize.FieldID, field.TypeString))
	id, ok := _u.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "InstanceSize.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := _u.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, instancesize.FieldID)
		for _, f := range fields {
			if !instancesize.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != instancesize.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(instancesize.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.Name(); ok {
		_spec.SetField(instancesize.FieldName, field.TypeString, value)
	}
	if value, ok := _u.mutation.DisplayName(); ok {
		_spec.SetField(instancesize.FieldDisplayName, field.TypeString, value)
	}
	if _u.mutation.DisplayNameCleared() {
		_spec.ClearField(instancesize.FieldDisplayName, field.TypeString)
	}
	if value, ok := _u.mutation.Description(); ok {
		_spec.SetField(instancesize.FieldDescription, field.TypeString, value)
	}
	if _u.mutation.DescriptionCleared() {
		_spec.ClearField(instancesize.FieldDescription, field.TypeString)
	}
	if value, ok := _u.mutation.CPUCores(); ok {
		_spec.SetField(instancesize.FieldCPUCores, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCPUCores(); ok {
		_spec.AddField(instancesize.FieldCPUCores, field.TypeInt, value)
	}
	if value, ok := _u.mutation.MemoryMB(); ok {
		_spec.SetField(instancesize.FieldMemoryMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedMemoryMB(); ok {
		_spec.AddField(instancesize.FieldMemoryMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.DiskGB(); ok {
		_spec.SetField(instancesize.FieldDiskGB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDiskGB(); ok {
		_spec.AddField(instancesize.FieldDiskGB, field.TypeInt, value)
	}
	if _u.mutation.DiskGBCleared() {
		_spec.ClearField(instancesize.FieldDiskGB, field.TypeInt)
	}
	if value, ok := _u.mutation.CPURequest(); ok {
		_spec.SetField(instancesize.FieldCPURequest, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCPURequest(); ok {
		_spec.AddField(instancesize.FieldCPURequest, field.TypeInt, value)
	}
	if _u.mutation.CPURequestCleared() {
		_spec.ClearField(instancesize.FieldCPURequest, field.TypeInt)
	}
	if value, ok := _u.mutation.MemoryRequestMB(); ok {
		_spec.SetField(instancesize.FieldMemoryRequestMB, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedMemoryRequestMB(); ok {
		_spec.AddField(instancesize.FieldMemoryRequestMB, field.TypeInt, value)
	}
	if _u.mutation.MemoryRequestMBCleared() {
		_spec.ClearField(instancesize.FieldMemoryRequestMB, field.TypeInt)
	}
	if value, ok := _u.mutation.DedicatedCPU(); ok {
		_spec.SetField(instancesize.FieldDedicatedCPU, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresGpu(); ok {
		_spec.SetField(instancesize.FieldRequiresGpu, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresSriov(); ok {
		_spec.SetField(instancesize.FieldRequiresSriov, field.TypeBool, value)
	}
	if value, ok := _u.mutation.RequiresHugepages(); ok {
		_spec.SetField(instancesize.FieldRequiresHugepages, field.TypeBool, value)
	}
	if value, ok := _u.mutation.HugepagesSize(); ok {
		_spec.SetField(instancesize.FieldHugepagesSize, field.TypeString, value)
	}
	if _u.mutation.HugepagesSizeCleared() {
		_spec.ClearField(instancesize.FieldHugepagesSize, field.TypeString)
	}
	if value, ok := _u.mutation.SpecOverrides(); ok {
		_spec.SetField(instancesize.FieldSpecOverrides, field.TypeJSON, value)
	}
	if _u.mutation.SpecOverridesCleared() {
		_spec.ClearField(instancesize.FieldSpecOverrides, field.TypeJSON)
	}
	if value, ok := _u.mutation.SortOrder(); ok {
		_spec.SetField(instancesize.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSortOrder(); ok {
		_spec.AddField(instancesize.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.Enabled(); ok {
		_spec.SetField(instancesize.FieldEnabled, field.TypeBool, value)
	}
	if value, ok := _u.mutation.CreatedBy(); ok {
		_spec.SetField(instancesize.FieldCreatedBy, field.TypeString, value)
	}
	_node = &InstanceSize{config: _u.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{instancesize.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	_u.mutation.done = true
	return _node, nil
}
